<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="admin.css"> <link href="https://fonts.googleapis.com/css2?family=Anton&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* Estilos m√≠nimos para que el iframe se vea integrado */
        body { background: transparent; padding: 10px; color: white; overflow: hidden; }
        .menu-zona { display: block !important; margin: auto; max-width: 450px; }
        .btn-accion { width: 100%; margin: 10px 0; cursor: pointer; }
        select { background: #333; color: white; border-radius: 5px; padding: 5px; width: 100%; }
    </style>
</head>
<body>

    <div class="menu-zona">
        <h4 id="dinamico-titulo">Acciones para Zona ...</h4>
        <ul>
            <li>üìÖ Fecha: 
                <select id="select-fecha">
                    <option>Fecha 1</option>
                    <option>Fecha 2</option>
                    <option>Fecha 3</option>
                    <option>Fecha 4</option>
                </select>
            </li>
            <li>üìù <button onclick="ejecutarCarga()" class="btn-accion">Cargar patinadoras/es</button></li>
            <li>‚úÖ <button onclick="ejecutarAltas()" class="btn-accion">Altas pr√≥xima fecha</button></li>
            <li>üëÅÔ∏è <button onclick="ejecutarVerDatos()" class="btn-accion">Ver datos cargados</button></li>
            <li>üè¢ <button onclick="ejecutarModalClubes()" class="btn-accion" style="background: rgba(255,215,0,0.1); border: 1px dashed gold;">Asociar nuevo Club</button></li>
        </ul>
    </div>
<div id="contenedor-formulario-dinamico" style="display: none; margin-top: 20px;">
    </div>

    <div id="ModalClub" style="display:none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); padding-top: 100px;">
    <div style="background: #1a1a1a; margin: auto; padding: 20px; border: 1px solid gold; border-radius: 15px; width: 80%; max-width: 400px; text-align: center; color: white;">
        <h3 style="color: gold; font-family: 'Anton', sans-serif;">ASOCIAR NUEVO CLUB</h3>
        <p style="font-size: 0.8rem; margin-bottom: 15px;">Escrib√≠ el nombre del club para solicitar el alta:</p>
        
        <input type="text" id="nuevo-club-nombre" placeholder="NOMBRE DEL CLUB" class="input-registro" style="width: 100%; margin-bottom: 20px; text-transform: uppercase;">
        
        <div style="display: flex; gap: 10px;">
            <button onclick="guardarNuevoClub()" style="flex: 1; padding: 10px; background: gold; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">ENVIAR</button>
            <button onclick="cerrarModalClubes()" style="flex: 1; padding: 10px; background: #444; color: white; border: none; border-radius: 5px; cursor: pointer;">CANCELAR</button>
        </div>
    </div>
</div>

    <div style="background: rgba(255,255,255,0.05); border: 1px solid #ffd700; padding: 25px; border-radius: 15px; margin-top: 15px;">
        <h4 id="titulo-dinamico-zona" style="color: #ffd700; text-align: center; font-family: 'Anton', sans-serif;">üìù NUEVA INSCRIPCI√ìN</h4>
        
        <div style="margin-bottom: 15px;">
            <label style="color: white; font-size: 0.8rem;">Club</label>
            <div style="display: flex; gap: 5px;">
                <select id="reg-club" class="input-registro" style="width:100%">
                    <option value="">Cargando clubes...</option>
                </select>
                <button type="button" onclick="toggleLock('reg-club')" style="cursor:pointer; background:transparent; border:none; font-size:1.2rem;">üîì</button>
            </div>
        </div>

        <div style="margin-bottom: 15px;">
            <label style="color: white; font-size: 0.8rem;">Disciplina</label>
            <select id="reg-disciplina" class="input-registro" style="width:100%" onchange="actualizarCascada('disciplina')">
                <option value="">SELECCIONE...</option>
                <option value="LIBRE">LIBRE</option>
                <option value="DANZA">DANZA SOLO</option>
            </select>
        </div>

        <div style="margin-bottom: 15px;">
            <label style="color: white; font-size: 0.8rem;">Divisional</label>
            <select id="reg-divisional" class="input-registro" style="width:100%" onchange="actualizarCascada('divisional')">
                <option value="">DIVISIONAL...</option>
            </select>
        </div>

        <div style="margin-bottom: 15px;">
            <label style="color: white; font-size: 0.8rem;">Categor√≠a</label>
            <select id="reg-categoria" class="input-registro" style="width:100%">
                <option value="">CATEGOR√çA...</option>
            </select>
        </div>

        <hr style="border: 0.5px solid rgba(255,215,0,0.3); margin: 20px 0;">

        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <input type="text" id="reg-apellido" placeholder="APELLIDO" class="input-registro" style="flex:1">
            <input type="text" id="reg-nombre" placeholder="NOMBRE" class="input-registro" style="flex:1">
        </div>

        <div style="margin-bottom: 15px;">
            <input type="number" id="reg-DNI" placeholder="DNI (Sin puntos)" class="input-registro" style="width:100%">
        </div>

        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <div style="flex: 2;">
                <label style="color: white; font-size: 0.7rem;">Fecha de Nacimiento</label>
                <input type="date" id="reg-nacimiento" class="input-registro" style="width:100%" onchange="calcularEdadDeportiva(this.value, 'reg-edad')">
            </div>
            <div style="flex: 1;">
                <label style="color: white; font-size: 0.7rem;">Edad Dep.</label>
                <input type="text" id="reg-edad" placeholder="0" class="input-registro" readonly style="width:100%; color:gold; font-weight:bold; text-align:center;">
            </div>
        </div>

        <button type="button" onclick="enviarCargaPatinador()" style="width: 100%; padding: 15px; background: gold; color: black; font-weight: bold; cursor:pointer; border-radius:10px; border:none; font-family: 'Anton', sans-serif; margin-top: 10px;">
            üöÄ CARGAR PATINADOR
        </button>
    </div>
</div>

<script src="acciones_zonas.js?v=1.1"></script>

 <script>
    // 1. Detecci√≥n de zona (Aseguramos que existan antes de usarlas)
    const urlParams = new URLSearchParams(window.location.search);
    const zonaSaca = urlParams.get('zona'); 
    
    // Las guardamos en window para que el .js las vea
    window.zonaActivaNum = zonaSaca; 
    window.zonaActiva = "ZONA " + zonaSaca; 

    // Seteamos el t√≠tulo
    const titulo = document.getElementById('dinamico-titulo');
    if (titulo) titulo.innerText = `Acciones para Zona ${zonaSaca}`;

    // 2. Funciones Puente
    function ejecutarCarga() {
        // Verificamos que zonaActivaNum tenga algo
        if (!window.zonaActivaNum) {
            console.error("Error: No se detect√≥ el n√∫mero de zona en la URL");
            return;
        }
        
        console.log("Cargando para Zona: " + window.zonaActivaNum);
        
        if (typeof abrirFormularioCarga === 'function') {
            abrirFormularioCarga(window.zonaActivaNum); 
        } else {
            console.error("La funci√≥n abrirFormularioCarga no est√° definida en acciones_zonas.js");
        }
    }

    function ejecutarAltas() {
        alert("Abriendo Altas para " + window.zonaActiva);
    }

    function ejecutarVerDatos() {
        alert("Visualizando datos de " + window.zonaActiva);
    }

    function ejecutarModalClubes() {
        if (typeof abrirModalClubes === 'function') {
            abrirModalClubes();
        } else {
            alert("La funci√≥n de clubes no est√° cargada.");
        }
    }
</script>
</body>
</html>